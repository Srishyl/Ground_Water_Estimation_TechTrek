# üåä Groundwater RAG API - Formatted Output Guide

## Overview
The Groundwater RAG API now provides enhanced formatted output for better readability and professional presentation of groundwater data analysis.

## üöÄ Available Endpoints

### 1. Standard Query Endpoint
```
POST /ask
```
- **Purpose**: Basic query processing with improved formatting
- **Features**: 
  - Markdown formatting
  - Structured sections
  - Professional report layout
  - Multilingual support

### 2. Enhanced Formatted Endpoint
```
POST /ask-formatted
```
- **Purpose**: Advanced formatting with report structure
- **Features**:
  - Professional report header
  - Query section
  - Analysis section
  - Metadata footer
  - Enhanced markdown formatting

## üìã Response Format

### Standard Response Structure
```json
{
  "answer": "Formatted groundwater analysis...",
  "detected_lang": "en",
  "selected_lang": "en", 
  "query": "Your question here",
  "formatted": true
}
```

### Formatted Response Structure
The `/ask-formatted` endpoint returns responses in this structure:

```markdown
# üíß Groundwater Data Analysis Report

## Query
**Question:** Your question here

## Analysis
[Detailed groundwater analysis with markdown formatting]

---
*Report generated by Groundwater RAG API - Multilingual Support*
*Language: English*
```

## üé® Formatting Features

### 1. **Structured Sections**
- Clear headings and subheadings
- Organized data categories
- Logical flow of information

### 2. **Markdown Formatting**
- Headers (`#`, `##`, `###`)
- Bullet points and lists
- **Bold** and *italic* text
- Tables for numerical data
- Code blocks for technical data

### 3. **Data Organization**
- **Rainfall Data**: Precipitation metrics with units
- **Geographical Area**: Land area classifications
- **Groundwater Recharge**: Recharge sources and amounts
- **Extraction Data**: Usage and consumption metrics
- **Quality Assessment**: Water quality parameters

### 4. **Professional Presentation**
- Report-style headers
- Consistent formatting
- Clear data explanations
- Unit specifications (ham, ha, mm, %)
- Missing data indicators

## üîß Usage Examples

### Python Example
```python
import requests

# Standard formatted query
response = requests.post(
    "http://localhost:8000/ask",
    json={
        "query": "Groundwater data for Davanagere district in Karnataka",
        "language": "en"
    }
)

# Enhanced formatted query
response = requests.post(
    "http://localhost:8000/ask-formatted", 
    json={
        "query": "Rainfall data for Maharashtra state",
        "language": "en"
    }
)

data = response.json()
print(data["answer"])
```

### JavaScript/Frontend Example
```javascript
// Standard query
const response = await fetch('http://localhost:8000/ask', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
    },
    body: JSON.stringify({
        query: 'Groundwater extraction data for 2023',
        language: 'en'
    })
});

const data = await response.json();
// Render data.answer with markdown support
```

## üåç Multilingual Support

The API supports 15 languages with formatted output:
- English (en)
- Hindi (hi)
- Bengali (bn)
- Tamil (ta)
- Telugu (te)
- Malayalam (ml)
- Gujarati (gu)
- Marathi (mr)
- Punjabi (pa)
- Kannada (kn)
- Odia (or)
- Assamese (as)
- Urdu (ur)
- Nepali (ne)
- Sinhala (si)

## üìä Sample Output

### Input Query
```
"Groundwater data for Davanagere district in Karnataka"
```

### Formatted Output
```markdown
# üíß Groundwater Data Analysis Report

## Query
**Question:** Groundwater data for Davanagere district in Karnataka

## Analysis
# Groundwater Assessment Report: Davanagere District, Karnataka

This report summarizes groundwater data for Davanagere District, Karnataka, averaging across available years (2016, 2019, 2021, 2022, 2024).

## 1. Summary of Key Findings

* **Significant Groundwater Resources**: The district shows substantial groundwater potential
* **Rainfall Patterns**: Consistent rainfall across commanded and non-commanded areas
* **Recharge Capabilities**: Strong recharge from multiple sources

## 2. Rainfall Data (Averaged)

| Category | Value (mm) | Description |
|----------|------------|-------------|
| Commanded Area | 743.28 | Areas with irrigation infrastructure |
| Non-Commanded Area | 726.45 | Areas without direct irrigation |
| Total | 732.57 | Overall district average |

## 3. Geographical Area Analysis

| Area Type | Hectares | Percentage |
|-----------|----------|------------|
| Recharge Worthy (Commanded) | 148,880 | 33.2% |
| Recharge Worthy (Non-Commanded) | 260,672 | 58.1% |
| Hilly Area | 38,412 | 8.6% |
| **Total Geographical Area** | **447,964** | **100%** |

---
*Report generated by Groundwater RAG API - Multilingual Support*
*Language: English*
```

## üõ†Ô∏è Testing

Use the provided test script to verify formatted output:

```bash
python test_formatted_output.py
```

## üìà Benefits

1. **Professional Presentation**: Report-style formatting suitable for official documents
2. **Better Readability**: Clear structure and markdown formatting
3. **Comprehensive Data**: All relevant metrics included with explanations
4. **Multilingual Support**: Formatted output in 15 languages
5. **Consistent Structure**: Standardized report format across all queries
6. **Frontend Ready**: Markdown output easily rendered in web applications

## üîó Integration

The formatted output is perfect for:
- Web applications with markdown rendering
- Report generation systems
- Documentation tools
- Professional groundwater assessments
- Research and analysis workflows

---

*For more information, visit the API documentation at `http://localhost:8000/docs`*
